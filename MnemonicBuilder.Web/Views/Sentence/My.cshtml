@model System.Collections.Generic.IEnumerable<MnemonicBuilder.Infrastructure.Entities.Sentence>

@{
	ViewData["Title"] = "Мои предложения";
}

<div class="container">
	<div class="row g-2 mt-3">
		@foreach (var sentence in Model)
		{
			<div class="col-sm-6 col-md-4 col-lg-3 my-2">
				<div class="card h-100 border-info shadow">
					<div class="card-header text-truncate" title="@sentence.Title">
						<span class="text-muted">@sentence.CreatedAt.ToString("g")</span>
					</div>
					<div class="card-body d-flex flex-column">
						<h6 class="card-title text-truncate">@sentence.Title</h6>
						<p class="card-text small flex-grow-1 overflow-hidden" style="height: 5rem; text-overflow: ellipsis;">
							@sentence.Description
						</p>
					</div>
					<div class="card-footer btn-group">
						<a asp-route-Id="@sentence.Id" asp-action="Edit" class="btn btn-outline-primary"><i class="bi bi-pencil"></i></a>
						@* <a asp-route-Id="@sentence.Id" asp-action="Delete" class="btn btn-outline-danger"><i class="bi bi-trash3"></i></a> *@
						<button class="btn btn-outline-danger" data-bs-toggle="modal" data-bs-target="#deleteModal" data-id="@sentence.Id" data-title="@sentence.Title">
							<i class="bi bi-trash3"></i>
						</button>
					</div>
				</div>
			</div>
		}
	</div>
	<div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<form id="deleteForm" method="post">
					<div class="modal-header">
						<h5 class="modal-title" id="deleteModalLabel">Удаление предложения</h5>
						<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Закрыть"></button>
					</div>
					<div class="modal-body">
						Вы действительно хотите удалить предложение: <strong id="modalSentenceTitle"></strong>?
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Отмена</button>
						<button type="submit" class="btn btn-danger">Удалить</button>
					</div>
				</form>
			</div>
		</div>
	</div>
</div>

@section Scripts {
	<script>
		var deleteModal = document.getElementById('deleteModal');
		deleteModal.addEventListener('show.bs.modal', function (event) {
			var button = event.relatedTarget;
			var sentenceId = button.getAttribute('data-id');
			var sentenceTitle = button.getAttribute('data-title');

			document.getElementById('modalSentenceTitle').textContent = sentenceTitle;

			var form = document.getElementById('deleteForm');
			form.action = '/Sentence/Delete/' + sentenceId;
		});
	</script>
}


